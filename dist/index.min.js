/*!
 * name: @jswork/next-tree
 * description: Tree data for next.
 * homepage: https://github.com/afeiship/next-tree
 * version: 1.0.0
 * date: 2020-11-20 13:49:49
 * license: MIT
 */
!function(){var r=(this||window||Function("return this")()).nx||require("@jswork/next"),e=r.deepClone||require("@jswork/next-deep-clone"),n=r.traverse||require("@jswork/next-traverse"),i={itemsKey:"children",clone:!0},t=r.declare("nx.Tree",{statics:{serialize:function(t){return JSON.parse(JSON.stringify(t))},create:function(t,n){return new this(t,n)}},methods:{init:function(t,n){this.options=r.mix(null,i,n),this.data=this.options.clone?e(t):t,this.attach()},attach:function(){var i=this.options;n(this.data,function(t,n,e){n.__parent__=function(){return e},n.__children__=function(){return n[i.itemsKey]||[]}},i)},traverse:function(t){n(this.data,t,this.options)},find:function(e){var i=null;return n(this.data,function(t,n){if(e.apply(null,arguments))return i=n,r.BREAKER},this.options),i},search:function(t){var r=this.options,n=e(this.data),o=function(t,i){return t.filter(function(t,n){var e=t[r.itemsKey];return!!(e&&e.length&&(e=t[r.itemsKey]=o(e,i)).length)||i(n,t)})};return o(n,t)},filter:function(e){var i=[];return n(this.data,function(t,n){e.apply(null,arguments)&&i.push(n)},this.options),i},ancestors:function(t){var n=[],t=this.find(t);if(t)for(var e=t.__parent__();e;)n.push(e),e=e.__parent__();return n},descendants:function(t){var t=this.find(t),e=[];return t&&n(t,function(t,n){e=e.concat(n.__children__())},this.options),e},parent:function(t){t=this.find(t);return t&&t.__parent__()},children:function(t){t=this.find(t);return t&&t.__children__()}}});"undefined"!=typeof module&&module.exports&&(module.exports=t)}();